version: '3.1'
rules:
- rule: Say greeting anytime the user says greeting
  steps:
  - intent: Greeting
  - action: action_respond_greeting

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: Goodbye
  - action: utter_goodbye

- rule: Say mood unhappy anytime the user says mood unhappy and ask to cheer up
  steps:
  - intent: Mood_unhappy
  - action: utter_mood_unhappy
  - action: utter_cheer_up
  - action: utter_did_that_help

- rule: Say you're welcome each time user says thanks
  steps:
  - intent: Thanks
  - action: utter_response_thank


  # Geriatric Questionnaire ----------------------------------------------------

- rule: Start geriatric questionnaire
  steps:
  - intent: Start_Geriatric_Questionnaire
  - action: utter_begin_questionnaire_yes_no
  - action: geriatric_questionnaire_form
  - active_loop: geriatric_questionnaire_form

- rule: Submit geriatric questionnaire form
  condition:
  - active_loop: geriatric_questionnaire_form
  steps:
  - action: geriatric_questionnaire_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: utter_end_questionnaire
  - action: submit_geriatric_questionnaire_form

  # Oxford Happiness Questionnaire ---------------------------------------------

- rule: Start oxford happiness questionnaire
  steps:
  - intent: Start_Oxford_Happiness_Questionnaire
  - action: utter_begin_questionnaire_likert
  - action: oxford_happiness_questionnaire
  - active_loop: oxford_happiness_questionnaire

- rule: Submit oxford happiness questionnaire
  condition:
  - active_loop: oxford_happiness_questionnaire
  steps:
  - action: oxford_happiness_questionnaire
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: utter_end_questionnaire
  - action: submit_oxford_happiness_questionnaire